<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>R30077 SalesOrder - POS Return For Sales Order Line Required | ERP.net Domain Model </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="R30077 SalesOrder - POS Return For Sales Order Line Required | ERP.net Domain Model ">
    
    
      <link rel="shortcut icon" href="../favicon.ico">
      <link rel="stylesheet" href="../styles/docfx.vendor.min.css">
      <link rel="stylesheet" href="../styles/docfx.css">
      <link rel="stylesheet" href="../styles/main.css">
      <meta property="docfx:navrel" content="../toc.html">
      <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="r30077-salesorder---pos-return-for-sales-order-line-required">R30077 SalesOrder - POS Return For Sales Order Line Required</h1>

<table>
<col style="width:23.08%">
<col style="width:76.92%">
<tbody>
<tr>
<td><strong>Code</strong></td>
<td>R30077</td>
</tr>
<tr>
<td><strong>Entity</strong></td>
<td><a class="xref" href="../entities/Crm.Sales.SalesOrders.html">Crm.Sales.SalesOrders Entity</a></td>
</tr>
<tr>
<td><strong>Name</strong></td>
<td>POSReturnForSalesOrderLineRequired</td>
</tr>
<tr>
<td><strong>Attribute</strong></td>
<td>Line.ReturnForSalesOrderLine</td>
</tr>
<tr>
<td><strong>Layer</strong></td>
<td>Back-End</td>
</tr>
<tr>
<td><strong>Events</strong></td>
<td>FirmPlanning +</td>
</tr>
<tr>
<td><strong>Priority</strong></td>
<td>Normal</td>
</tr>
<tr>
<td><strong>Modify</strong></td>
<td>NO</td>
</tr>
<tr>
<td><strong>Applicable
Legislations</strong></td>
<td><a href="xref:applicable-legislations">BG
(EnterpriseCompany.Company)</a></td>
</tr>
<tr>
<td><strong>Action</strong></td>
<td>Validate that:
<br><br>
If ((PosLocation != NULL) &amp;&amp;
<br><br>
(SalesOrdersOptions [DocumentType=SalesOrder.DocumentType].AllowedDirections =
SalesReturn))
<br><br>
, then Child.Lines[(HistoricalDataJson = NULL) &amp;&amp; (ReturnForSalesOrderLine =
NULL)].Count() == 0</td>
</tr>
<tr>
<td><strong>Description</strong></td>
<td>When returning products in a POS Location, according to the Bulgarian legislation, the
return receipt must contain particular information about the Sales Order and the fiscal
receipt with which the products are sold. Such information is the Fiscal Sales Number of
the original Sales Order and the number, date and time, amount and fiscal memory number
of the original fiscal receipt.
<br><br>
This information can be gathered automatically by the system. In this case the relation
between the return sale and the sales order for the sale of the products is made through
the field 'Return For Sales Order Line' in the return sale's lines.
<br><br>
Alternatively, the information can be entered manually in the filed Historical Data Json
in the lines of the return Sales Order.
<br><br>
For this reason, the current rule reassures that if the Allowed Direction of the Sales
Orders's document type is 'Sales Return' and the field POS Location has a value -
then at least one of the fields 'Return For Sales Order Line' or 'Historical Data
Json' is filled in.</td>
</tr>
<tr>
<td><strong>Message</strong></td>
<td>The fields 'Return For Sales Order Line' and 'Historical Data Json' in line number
'{LineNo}' of document '{DocumentText}' do not have values.
<br><br>
Please, make sure that at least one of the fields 'Return For Sales Order Line' or
'Historical Data Json' is filled in all of the lines of the return sales order.</td>
</tr>
<tr>
<td><strong>Version</strong></td>
<td>Introduced: 2019.1
<br><br>
Updated: 2019.1 - Added condition HistoricalDataJson = NULL</td>
</tr>
<tr>
<td><strong>Revocable</strong></td>
<td>NO</td>
</tr>
</tbody>
</table>
<p><em>* For more information about the Business Rules Documentation Template and a short explanation of each column, see
topic <a href="../templates/template-description-system-business-rules.html">System Business Rules</a>.</em></p>

</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/ErpNetDocs/model/blob/master/business-rules/R30077.md/#L1" class="contribution-link">Edit this page</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In this article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      
      <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
