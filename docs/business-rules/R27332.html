<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>R27332 PaymentTransaction - Compare Total Expense And Income Amounts On Parent Transfer | ERP.net Domain Model </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="R27332 PaymentTransaction - Compare Total Expense And Income Amounts On Parent Transfer | ERP.net Domain Model ">
    
    
      <link rel="shortcut icon" href="../favicon.ico">
      <link rel="stylesheet" href="../styles/docfx.vendor.min.css">
      <link rel="stylesheet" href="../styles/docfx.css">
      <link rel="stylesheet" href="../styles/main.css">
      <meta property="docfx:navrel" content="../toc.html">
      <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="r27332-paymenttransaction---compare-total-expense-and-income-amounts-on-parent-transfer">R27332 PaymentTransaction - Compare Total Expense And Income Amounts On Parent Transfer</h1>

<table>
<col style="width:16.24%">
<col style="width:83.76%">
<tbody>
<tr>
<td><strong>Code</strong></td>
<td>R27332</td>
</tr>
<tr>
<td><strong>Entity</strong></td>
<td><a class="xref" href="../entities/Finance.Payments.PaymentTransactions.html">Finance.Payments.PaymentTransactions Entity</a></td>
</tr>
<tr>
<td><strong>Name</strong></td>
<td>CompareAllPaymentAmountsOnParentTransfers</td>
</tr>
<tr>
<td><strong>Attribute</strong></td>
<td>TotalAmount</td>
</tr>
<tr>
<td><strong>Layer</strong></td>
<td>Back-End</td>
</tr>
<tr>
<td><strong>Events</strong></td>
<td>Released +</td>
</tr>
<tr>
<td><strong>Priority</strong></td>
<td>Normal</td>
</tr>
<tr>
<td><strong>Modify</strong></td>
<td>NO</td>
</tr>
<tr>
<td><strong>Applicable
Legislations</strong></td>
<td><a href="xref:applicable-legislations">ALL // no condition
needed</a></td>
</tr>
<tr>
<td><strong>Action</strong></td>
<td>If (Payment.ParentDocument.DocumentType.EntityName == Transfer)
<br><br>
Validate that:
<br><br>
SUM(all at least released non-voided Payments which ParentDocument == currentTransfer AND
Payment.Direction == Expense) &gt;= SUM (all at least released non-voided Payments which
ParentDocument == currentTransfer AND Payment.Direction == Income)
<br><br>
<br><br>
<br><br>
(in all SUMs the current Payment.TotalAmount is included)</td>
</tr>
<tr>
<td><strong>Description</strong></td>
<td>On document state change when the new state is greater than or equal to Release and the
PaymentTransaction has parent document which is Transfer, validate that the total expense is
greater than or equal to the total income amounts. The total expense amounts are calculated by
the sum of all at least released and non voided PaymentTransactions on the current Transfer
which has direction 'Expense'. The total income amounts are calculated by the sum of all at
least released and non voided PaymentTransactions on the current Transfer which has direction
'Income'.</td>
</tr>
<tr>
<td><strong>Message</strong></td>
<td>&quot;The state of document '{0}' cannot become 'Released' or higher, because the expense ({1})
is less than the income ({2}).&quot;, [DocumentText], [sum of the total expense and its
currency], [sum of the total income and its currency]</td>
</tr>
<tr>
<td><strong>Version</strong></td>
<td>Introduced: 2017
<br><br>
Updated: 2019.1 - &quot;Revocable&quot; changed from &quot;NO&quot; to &quot;YES&quot;</td>
</tr>
<tr>
<td><strong>Revocable</strong></td>
<td>YES</td>
</tr>
<tr>
<td><strong>Revocable</strong></td>
<td>NO</td>
</tr>
</tbody>
</table>
<p><em>* For more information about the Business Rules Documentation Template and a short explanation of each column, see
topic <a href="../templates/template-description-system-business-rules.html">System Business Rules</a>.</em></p>

</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/ErpNetDocs/model/blob/master/business-rules/R27332.md/#L1" class="contribution-link">Edit this page</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In this article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      
      <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
