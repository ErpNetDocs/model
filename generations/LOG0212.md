---
erp.entity: Logistics.Inventory.TransferOrders
erp.type: generation
---

# LOG0212 Create receipt Store order for the issued products

## Basic Information

| Module                          | Logistics.Inventory                                          |
| :------------------------------ | ------------------------------------------------------------ |
| Code                            | LOG0212                                                      |
| Parent Document                 | Transfer Order                                               |
| Sub-document                    | Store Order                                                  |
| Full Name                       | Create receipt Store order for the products remaining to be issued (for planning only)           |
| Status                          | [NEW](xref:generation-procedures-update)                     |
| Deterministic                   | [NO](xref:deterministic-generations)                         |
| Supports Transitional Documents | [NO](xref:transitional-documents)                            |
| Supports Single Execution       | YES                                                          |
| Replaces                        | GenerateSeparateReceiptStoreOrders                           |
| Orphan Rows                     | Forbid                                                       |
| Split Function                  |                                                              |
| Introduced In Version           | 2024                                                         |
| Date of Suspension              | -                                                            |

##  Business Logic

This Generation procedure is used to create receipt Store Orders (SO) from the Transfer Orders.

What is specific about it, is that it creates receipt SO, only for the products/lines that are Planned to be issued i.e. for which there are NO released and non-voided Store Transactions (ST) yet.
The SO for the products that have already been issued from the other store are created by another generation procedure - @LOG0211 . 


```
StoreOrder.DocumentDate = TODAY

StoreOrder.PlanningOnly = True

StoreOrder.Store = TransferOrder.ToStore

StoreOrder.MovementType = Receipt

StoreOrder.DueDate = TransferOrder.DefaultDueDateIn

StoreOrder.PlannedReleaseDate = TransferOrder.DefaultDueDateIn

StoreOrder.PlannedCompletionDate = TransferOrder.DefaultDueDateIn

StoreOrder.CurrencyDirectory =  TransferOrder.CurrencyDirectory 

StoreOrder.DocumentCurrency =  

​                          if (TransferOrder.ToStore.Currency != null)

​                          , then TransferOrder.ToStore.Currency

​                          , else Error "The field 'Document Currency' in the Store Order cannot be filled because currency for the receipt store is not specified."

StoreOrder.FromParty = TransferOrder.FromParty

StoreOrder.ToParty = TransferOrder.FromStore
```

## Fulfillments

| Name                        | TransferOrderLineToReceiptStoreOrderLine                     |
| :-------------------------- | ------------------------------------------------------------ |
| Parent Entity               | TransferOrderLine |
| Child Entity                | StoreOrderLine                                               |
| Parent / Child Relationship | StoreOrderLine.ParentDocument = TransferOrder; StoreOrderLine.ParentLineNo = TransferOrderLine.LineNo |

| Name                        | IssueStoreTransactionLineToStoreOrderLine                    |
| :-------------------------- | ------------------------------------------------------------ |
| Parent Entity               | StoreTransactionLines (where "StoreTransactionLine.ParentLine =  Id of any TransferOrderLine of the generating TransferOrder" AND "StoreTransactionLine.StoreTransaction.MovementType = Issue" AND "StoreTransactionLine.Document.State = RELEASE" AND "StoreTransactionLine.Document.Void = False")|
| Child Entity                | StoreOrderLine                                               |
| Parent / Child Relationship | StoreOrderLine.ParentDocument = StoreTransaction; StoreOrderLine.ParentLineNo = StoreTransaction.LineNo |

## [Metrics](../reference/metrics.md)

| Fulfillment Name                          |      Metric Name         |               Measurement Unit                | Parent Value                           | Child Value                         | New Record |
| :---------------------------------------- | :----------------------: | :-------------------------------------------: | :--------------------------------------| :---------------------------------- | :--------- |
| TransferOrderLineToReceiptStoreOrderLine  | SO_MStandardQuantityBase | TransferOrderLine.Product.BaseMeasurementUnit | TransferOrderLine.StandardQuantityBase | StoreOrderLine.StandardQuantityBase | NO     |
| TransferOrderLineToReceiptStoreOrderLine  | SO_MQuantity             | TransferOrderLine.QuantityUnit                | TransferOrderLine.Quantity             | StoreOrderLine.Quantity             | NO      |
| TransferOrderLineToReceiptStoreOrderLine  | SO_MQuantityBase         | TransferOrderLine.Product.BaseMeasurementUnit | TransferOrderLine.QuantityBase         | StoreOrderLine.QuantityBase         | NO      |
| IssueStoreTransactionLineToStoreOrderLine | ST_MStandardQuantityBase | StoreTransactionLine.Product.BaseMeasurementUnit | StoreTransactionLine.StandardQuantityBase | StoreOrderLine.StandardQuantityBase | NO     |
| IssueStoreTransactionLineToStoreOrderLine | ST_MQuantity             | StoreTransactionLine.QuantityUnit                | StoreTransactionLine.Quantity             | StoreOrderLine.Quantity             | NO      |
| IssueStoreTransactionLineToStoreOrderLine | ST_MQuantityBase         | StoreTransactionLine.Product.BaseMeasurementUnit | StoreTransactionLine.QuantityBase         | StoreOrderLine.QuantityBase         | NO      |

```
StoreOrderLine.LineNo = TransferOrderLine.LineOrd

StoreOrderLine.Product = TranferOrderLine.Product

StoreOrderLine.ProductVariant = TranferOrderLine.ProductVariant

StoreOrderLine.StoreBin = TranferOrderLine.ToStoreBin

StoreOrderLine.SerialNumber = TranferOrderLine.SerialNumber

StoreOrderLine.Quantity = TranferOrderLine.REMAINING(MQuantity)

StoreOrderLine.QuantityUnit = TranferOrderLine.QuantityUnit

StoreOrderLine.QuantityBase = TranferOrderLine.REMAINING(MQuantityBase)

StoreOrderLine.StandardQuantityBase = StoreTransactionLine.REMAINING(MStandardQuantityBase)

StoreOrderLine.LineCost = CONVERT(StoreOrderLine.Document.DocumentCurrency, StoreTransactionLine.REMAINING(MUnitCost)

StoreOrderLine.UnitCost =
                 if (StoreOrderLine.LineCost != 0.00), then StoreOrderLine.CONVERT(StoreOrderLine.Document.DocumentCurrency, StoreTransactionLine.REMAINING(MUnitCost)/Quantity

                 else 0.00
                         
StoreOrderLine.Lot = StoreTransactionLine.Lot

StoreOrderLine.GuaranteePeriodDays =
                 if(StoreTransactionLine.GuaranteePeriodDays != null), then StoreTransactionLine.GuaranteePeriodDays

                 else Product.GuaranteePeriodDays

StoreOrderLine.SalesOrderLine = null

StoreOrderLine.Notes = CAST(StoreTransactionLine.ParentLineId, TransferOrderLines).Notes

StoreOrderLine.PersistLot = false

StoreOrderLine.ParentDocument = StoreTransactionLine

StoreOrderLine.ParentLineNo = StoreTransactionLine.LineNo

StoreOrderLine.ParentLineId = TranferOrderLine.Id

StoreOrderLine.TransactionTimestamp = null

StoreOrderLine.ForOrdering = false

```

> [!Note]
> WARNING: Any of the Store Orders created according to the description above is saved then and only when there is at least one line in it.
