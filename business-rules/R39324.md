---
erp.type: front-end-business-rule
erp.entity: Crm.Sales.SalesOrderPaymentPlans
---

# R39324 Sales Order Payment Plan - Set Payment Amount (Recalc)
+----------------------+----------------------------------------------------------------------------------------------+
| **Code**             | 39324                                                                                        |
+----------------------+----------------------------------------------------------------------------------------------+
| **Entity**           | @Crm.Sales.SalesOrderPaymentPlans                                                            |
+----------------------+----------------------------------------------------------------------------------------------+
| **Name**             | SetPaymentAmount                                                                             |
+----------------------+----------------------------------------------------------------------------------------------+
| **Attribute**        | [PaymentAmount](../entities/Crm.Sales.SalesOrderPaymentPlans.md#paymentamount)               |
+----------------------+----------------------------------------------------------------------------------------------+
| **Layer**            | Front-End                                                                                    |
+----------------------+----------------------------------------------------------------------------------------------+
| **Events**           | AttributeChanged(Amount, PaymentAmount, PaymentCurrency)                                     |
+----------------------+----------------------------------------------------------------------------------------------+
| **Priority**         | Normal                                                                                       |
+----------------------+----------------------------------------------------------------------------------------------+
| **Modify**           | YES                                                                                          |
+----------------------+----------------------------------------------------------------------------------------------+
| **Applicable         | [ALL // no condition needed](xref:applicable-legislations)                                   |
| Legislations**       |                                                                                              |
+----------------------+----------------------------------------------------------------------------------------------+
| **Action**           | IIF((PaymentCurrency == null), null, IIF(((Amount != null) OrElse True), SetPaymentAmount(), |
|                      |  PaymentAmount))                                                                             |
+----------------------+----------------------------------------------------------------------------------------------+
| **Description**      | The logic is as follows: If Payment Currency has a value (i.e., is not empty), and the       |
|                      | value in the Amount field is not the result of converting the Payment Amount value using     |
|                      | document currency, then the Payment Amount field must be updated with the converted value    |
|                      | of the Amount field, rounded to the second decimal digit, using the currency defined in      |
|                      | Payment Currency. If Payment Currency doesn't have a value, then the Payment Amount field    |
|                      | should be null. Or if the value in the Amount field is the result of converting the Payment  |
|                      | Amount field, then the Payment Amount field should stay what it is.                          |
+----------------------+----------------------------------------------------------------------------------------------+
| **Message**          |                                                                                              |
+----------------------+----------------------------------------------------------------------------------------------+
| **Version**          |                                                                                              |
+----------------------+----------------------------------------------------------------------------------------------+
| **Revocable**        | YES                                                                                          |
+----------------------+----------------------------------------------------------------------------------------------+

*\* This is auto generated code. Don't change it.*
